{% extends "base.html" %}

{% block page_title %}Profile - Clash of Code{% endblock %}

{% block content %}

<h1>{{ username }}'s Profile</h1>

<p><strong>Username:</strong> {{ username }}</p>
<p><strong>Email:</strong> {{ email }}</p>
<p><strong>Level:</strong> {{ level }}</p>
<p><strong>XP:</strong> {{ xp }}</p>
<p><strong>Tokens:</strong> {{ tokens }}</p>

<!-- Battle Statistics Card -->
    <div class="card mb-4">
        <div class="card-header">
            <h4>⚔️ Battle Statistics</h4>
        </div>
        <div class="card-body">
            <div class="row">
                <!-- Rating -->
                <div class="col-md-6 mb-3">
                    <h5>Current Rating</h5>
                    <h2 style="color: {{ rank.color }} ;">
                        {{ rank.icon }} {{ user.rating }}
                    </h2>
                    <p>Rank: {{ rank.name }}</p>
                </div>
                
                <!-- Win/Loss Record -->
                <div class="col-md-6 mb-3">
                    <h5>Battle Record</h5>
                    <h3>
                        <span style="color:#00ffaa;">{{ user.wins }}W</span>
                        <span style="color: red;">{{ user.losses }}L</span>
                    </h3>
                    <p>Total Battles: {{ total_battles }}</p>
                    <p>Win Rate: {{ "{:.2f}".format(win_rate) }}%</p>
                </div>
            </div>

            <!-- Rank Tier Breakdown -->
            <div class="mt-4">
                <h6>Rank Tiers:</h6>
                <ul class="list-unstyled">
                    {% for tier in rank_tiers %}
                        <li style="color: {{ tier.color }};">
                            {{ tier.icon }} <strong>{{ tier.name }}:</strong>
                            {% if tier.max is none %}
                                {{ tier.min }}+ (Elite neural networks)
                            {% else %}
                                {{ tier.min }} - {{ tier.max }}
                                {% if tier.name == "Prototype" %}(Experimental builds){% endif %}
                                {% if tier.name == "Circuit" %}(Basic systems){% endif %}
                                {% if tier.name == "Processor" %}(Optimized units){% endif %}
                                {% if tier.name == "Mainframe" %}(Advanced networks){% endif %}
                                {% if tier.name == "Quantum" %}(Cutting-edge tech){% endif %}
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

<a href="{{ url_for('dashboard') }}" class="btn">←Dashboard</a>
{% endblock %}
